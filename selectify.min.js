!function(e){e.fn.selectify=function(){function t(e){e.stopPropagation();var t=e.data.element;t.children().removeClass("hidden"),t.find(".selectify-selected").addClass("hidden")}function s(t){t.stopPropagation();var s=t.data.element,i=s.text(),l=s.data("value"),n=s.parentsUntil(".selectify-container").parent().siblings("select"),c=s.siblings(".selectify-selected");n.children().removeAttr("selected"),n.find('[value="'+l+'"]').attr("selected",!0),c.text(i),e(document).trigger("selectify-option-clicked")}function i(e){e.stopPropagation();var t=e.data.element.is("ul")?e.data.element:e.data.elemet.parent();t.find(".selectify-option").addClass("hidden"),t.find(".selectify-selected").removeClass("hidden"),t.children().off("click.selectify-option, mouseleave.close-selectify")}function l(e){e.siblings(".selectify-container").remove()}return this.each(function(){var n='            <div class="selectify-container">                <ul class="selectify-select">                    <li class="selectify-selected"></li>                </ul>            </div>            ',c='                <li class="selectify-option hidden"></li>            ';$base=e(this),$base.hide();var a=$base.closest("select").length?$base.closest("select"):$base.find("select"),o=a.children();e(n).insertAfter($base);var d=$base.siblings(".selectify-container").find(".selectify-select");$base.is("select")||l($base),o.each(function(){var t=e(this),s=e.trim(t.text()),i=t.val(),l=e(c).clone(),n=$base.siblings().find(".selectify-select");l.attr("data-value",i).text(s),n.append(l),t.is(":selected")&&(l.addClass("selected"),n.find(".selectify-selected").text(s))}),d.on("click.selectify",{element:d},t),d.on("mouseleave.close-selectify",{element:d},i),d.find(".selectify-option").each(function(){e(this).on("click.selectify-option",{element:e(this)},s)}),e(document).on("selectify-option-clicked",{element:d},i)})}}(jQuery);
